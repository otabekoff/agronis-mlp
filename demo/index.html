<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AgroNIS — API Usage</title>
    <style>
      body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:24px;color:#0f172a}
      pre{background:#0b1220;color:#e6eef8;padding:12px;border-radius:6px;overflow:auto}
      code{font-family:monospace}
      h1,h2{color:#064e3b}
      .note{background:#ecfdf5;border-left:4px solid #10b981;padding:10px;margin:12px 0}
    </style>
  </head>
  <body>
    <h1>AgroNIS — API Usage</h1>
    <p>This page documents the <strong>POST /api/ask</strong> endpoint deployed on the live prototype.</p>

    <h2>Endpoint</h2>
    <p><code>POST https://agronis.netlify.app/api/ask</code></p>

    <h2>Purpose</h2>
    <p>Send a simple question about the project and receive a short answer. The endpoint uses Google Gemini (when quota is available) and also provides fast <em>mock</em> responses for common project questions to avoid quota issues.</p>

    <h2>Request</h2>
    <p>Content type: <code>application/json</code></p>
    <p>Body format:</p>
    <pre><code>{
  "question": "How does your project use AI?"
}</code></pre>

    <h2>Example (curl)</h2>
    <pre><code>curl -X POST https://agronis.netlify.app/api/ask \
  -H "Content-Type: application/json" \
  -d '{"question": "What does your project do?"}'
</code></pre>

    <h2>Example Response</h2>
    <pre><code>{
  "answer": "AgroNIS - bu IoT sensorlar va ...",
  "model": "gemini-2.0-flash-lite",
  "project": "AgroNIS"
}
</code></pre>

    <div class="note">
      <strong>Note:</strong> If the Google Gemini quota is exhausted or not configured, the function will return a pre-cached mock response for common questions (the JSON will include <code>"cached": true</code> or <code>"fallback": true</code> in those cases).
    </div>

    <h2>Common questions that return cached answers</h2>
    <ul>
      <li>What does your project do?</li>
      <li>Who is this product for?</li>
      <li>What technologies?</li>
      <li>How does it work?</li>
      <li>Roadmap</li>
    </ul>

    <h2>Environment / Auth</h2>
    <p>The serverless function expects the Google API key to be set on Netlify as an environment variable named <code>VITE_GEMINI_API_KEY</code>. If it is not present, the function will respond with a friendly error or fall back to mock answers.</p>

    <h2>Usage Tips</h2>
    <ol>
      <li>Use short, clear questions to get concise answers.</li>
      <li>For automated testing, check for <code>fallback</code> or <code>cached</code> fields in the response to detect mock results.</li>
      <li>To avoid quota issues during demos, prefer the cached/common-questions or run the demo while a billing-enabled Google Cloud project is attached to the API key.</li>
    </ol>

    <h2>Chatbot</h2>
    <p>The live app also contains a built-in Chat UI (open via the app) which uses the same backend AI where quota permits. For demo submissions you can rely on the mock answers when necessary.</p>

    <h2>Live App</h2>
    <p>Frontend (prototype): <a href="https://agronis.netlify.app">https://agronis.netlify.app</a></p>
    <p>Primary demo site (framer): <a href="https://agronis.framer.website">https://agronis.framer.website</a></p>

    <hr />
    <p style="font-size:0.9em;color:#475569">Created for AI500 Stage 2 demo — shows how to call the project API and explains mock/fallback behavior.</p>
  </body>
</html>